<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RAIZEL XMD • WhatsApp QR Multi-Utilisateurs</title>
<style>
:root{
 --glass:rgba(255,255,255,0.10);
 --primary:#1db954;
 --secondary:#9333ea;
 --text:#fff;
 --muted:#b3b3b3;
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto;margin:0;padding:0;}
body{background:#000;color:var(--text);overflow-x:hidden;}
canvas{position:fixed;inset:0;z-index:-2;}
.overlay{position:fixed;inset:0;z-index:-1;
 background:radial-gradient(circle at 30% 30%,#1db95430,transparent 40%),
         radial-gradient(circle at 70% 70%,#9333ea30,transparent 45%);
 pointer-events:none;}
.app{max-width:600px;margin:auto;padding:30px 20px;position:relative;z-index:1;}
.logo{text-align:center;margin-bottom:25px;}
.logo h1{margin-bottom:4px;}
.logo p{color:var(--muted);font-size:14px;}
.card{background:var(--glass);backdrop-filter:blur(20px);border-radius:22px;padding:20px;margin-bottom:20px;border:1px solid rgba(255,255,255,.15);box-shadow:0 0 40px rgba(0,0,0,.4);}
label{font-size:12px;color:var(--muted);}
input{width:100%;padding:14px;border-radius:14px;border:none;background:#00000055;color:white;margin:8px 0 14px;}
.btn{display:block;width:100%;padding:15px;margin-top:8px;border-radius:16px;background:linear-gradient(135deg,var(--primary),#22c55e);color:#000;font-weight:800;border:none;text-align:center;transition:.25s;cursor:pointer;}
.btn:active{transform:scale(.97);}
.results{margin-top:12px;}
.result{background:#11111155;padding:12px;border-radius:14px;margin-bottom:10px;font-weight:700;text-align:center;}
.qrimg{width:240px;height:240px;margin-top:10px;border-radius:18px;background:#fff;padding:12px;}
.footer-fixed{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);display:flex;gap:25px;z-index:2;}
.footer-fixed a img{width:40px;height:40px;display:block;}
.footer-text{text-align:center;font-size:12px;color:var(--muted);margin-top:10px;}
</style>
</head>
<body>
<canvas id="bg"></canvas>
<div class="overlay"></div>

<div class="app">
 <div class="logo">
   <h1>RAIZEL XMD</h1>
   <p>Connexion WhatsApp par QR Code</p>
 </div>

 <div class="card">
  <label>Numéro WhatsApp</label>
  <input id="phone" placeholder="2376XXXXXXX">
  <button class="btn" id="gen">GÉNÉRER QR</button>
  <div class="results" id="results"></div>
 </div>
</div>

<div class="footer-fixed">
 <a href="https://wa.me/237679064679" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp"></a>
 <a href="https://t.me/devraizel" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram"></a>
 <a href="https://github.com/yhrespon/RAIZEXMD" target="_blank"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub"></a>
</div>

<div class="footer-text">© 2025 RAIZEL XMD • Développé par Raizel</div>

<script>
// Background animation
const canvas=document.getElementById("bg"),ctx=canvas.getContext("2d");
let w,h,particles=[];
function resize(){w=canvas.width=innerWidth;h=canvas.height=innerHeight;}
window.onresize=resize;resize();
for(let i=0;i<50;i++)particles.push({x:Math.random()*w,y:Math.random()*h,r:2+Math.random()*3,dx:(Math.random()-.5)*0.7,dy:(Math.random()-.5)*0.7});
function animate(){
 ctx.clearRect(0,0,w,h);
 particles.forEach(p=>{
  p.x+=p.dx;p.y+=p.dy;
  if(p.x<0||p.x>w)p.dx*=-1;
  if(p.y<0||p.y>h)p.dy*=-1;
  ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fillStyle="rgba(29,185,84,0.5)";ctx.fill();
 });
 requestAnimationFrame(animate);
}
animate();
window.addEventListener("pointerdown",()=>particles.forEach(p=>{p.dx+=Math.random()*2-1;p.dy+=Math.random()*2-1;}));

// QR generation
document.getElementById("gen").onclick=async()=>{
 const phone=document.getElementById("phone").value.replace(/\D/g,'');
 const results=document.getElementById("results");
 results.innerHTML="";

 if(!phone){results.innerHTML="❌ Numéro manquant";return;}
 const div = document.createElement('div');
 div.classList.add('result');
 div.innerHTML = "⏳ Génération du QR...";
 results.appendChild(div);

 try{
  const r = await fetch(`/qr?number=${phone}`);
  const d = await r.json();

  div.innerHTML = "";
  if(d.qr){
    const img = document.createElement('img');
    img.src = d.qr;
    img.className = "qrimg";
    div.appendChild(img);
    const p = document.createElement('p');
    p.textContent = phone;
    div.appendChild(p);
  } else if(d.status){
    div.textContent = `✅ ${phone} déjà connecté`;
  } else if(d.error){
    div.textContent = `❌ ${d.error}`;
  } else {
    div.textContent = "❌ Erreur serveur";
  }
 } catch(e){
  console.error(e);
  div.textContent = "❌ Serveur injoignable";
 }
};
</script>
</body>
</html>

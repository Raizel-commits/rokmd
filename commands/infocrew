export const name = "infocrew";
export const description = "Display WhatsApp group information";

export async function execute(sock, msg) {
    const jid = msg.key.remoteJid;
    
    if (!jid.endsWith('@g.us')) {
        return await sock.sendMessage(jid, {
            text: "ğ™¶ğš›ğš˜ğšğš™ ğš˜ğš—ğš•ğš¢ ğšŒğš˜ğš–ğš–ğšŠğš—ğš."
        });
    }

    try {
        const metadata = await sock.groupMetadata(jid);
        const participants = metadata.participants;
        const admins = participants.filter(p => p.admin).map(a => `@${a.id.split('@')[0]}`);
        
        const infoText = `ğŸ“ *${metadata.subject}*\n\n` +
                         `ğŸ‘‘ ğ™¾ğš ğš—ğšğš›: @${metadata.owner?.split('@')[0] || 'Unknown'}\n` +
                         `ğŸ‘¥ ğ™¼ğšğš–ğš‹ğšğš›ğšœ: ${participants.length}\n` +
                         `ğŸ›¡ï¸ ğ™°ğšğš–ğš’ğš—ğšœ: ${admins.length}\n` +
                         `ğŸ“† ğ™²ğš›ğšğšŠğšğšğš: ${new Date(metadata.creation * 1000).toLocaleDateString()}`;
        
        await sock.sendMessage(jid, {
            text: infoText,
            mentions: admins.map(a => a + '@s.whatsapp.net')
        });
        
    } catch (error) {
        await sock.sendMessage(jid, {
            text: "ğ™µğšŠğš’ğš•ğšğš ğšğš˜ ğšğšğš ğšğš›ğš˜ğšğš™ ğš’ğš—ğšğš˜."
        });
    }
}

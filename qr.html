<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>RAIZEL-XMD ‚Ä¢ QR Code</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {background:#0f172a;color:#e5e7eb;font-family:Arial,Helvetica,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;}
.box {background:#020617;padding:30px;border-radius:10px;width:100%;max-width:380px;box-shadow:0 0 25px rgba(0,0,0,.5);text-align:center;}
h2 {color:#38bdf8;margin-bottom:20px;}
input {width:100%;padding:12px;border-radius:6px;border:none;margin-bottom:15px;font-size:16px;}
button {width:100%;padding:12px;border-radius:6px;border:none;background:#38bdf8;color:#020617;font-weight:bold;cursor:pointer;font-size:16px;}
button:disabled {opacity:0.6;cursor:not-allowed;}
.result {margin-top:20px;text-align:center;word-break:break-word;}
.qrimg {width:240px;height:240px;margin:0 auto 10px;display:block;background:#fff;padding:10px;border-radius:12px;}
.error {color:#ef4444;}
.success {color:#22c55e;font-weight:bold;font-size:18px;}
</style>
</head>
<body>

<div class="box">
  <h2>üì∑ QR Code WhatsApp</h2>
  <input id="phone" type="tel" placeholder="Num√©ro ex: 2376XXXXXXX">
  <button id="btn">G√©n√©rer QR</button>
  <div class="result" id="result"></div>
</div>

<script>
const btn = document.getElementById("btn");
const result = document.getElementById("result");

btn.onclick = async () => {
  const phone = document.getElementById("phone").value.trim();
  if(!phone){ result.innerHTML="<span class='error'>‚ùå Num√©ro requis</span>"; return;}
  btn.disabled=true; result.innerHTML="‚è≥ G√©n√©ration du QR...";

  try {
    const r = await fetch(`/qr?number=${encodeURIComponent(phone)}`);
    const data = await r.json();

    if(data.qr){
      result.innerHTML=`<img src="${data.qr}" class="qrimg"><div>${phone}</div>`;
    }else if(data.status){
      result.innerHTML=`<span class='success'>‚úÖ ${data.status}</span>`;
    }else if(data.error){
      result.innerHTML=`<span class='error'>‚ùå ${data.error}</span>`;
    }
  } catch(e){ result.innerHTML="<span class='error'>‚ùå Erreur serveur</span>"; console.error(e);}
  btn.disabled=false;
};
</script>

</body>
</html>

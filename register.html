<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ROK XD • Register</title>

<!-- reCAPTCHA -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<!-- Google Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
     crossorigin="anonymous"></script>

<style>
:root{
  --bg-1:#020617;
  --bg-2:#0f172a;
  --neon:#38bdf8;
  --glass-border:rgba(56,189,248,0.22);
  --muted:rgba(255,255,255,0.45);
  --card-w:380px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:system-ui,Arial;
background: radial-gradient(1200px 600px at 10% 10%, rgba(56,189,248,0.03), transparent),
            linear-gradient(180deg,var(--bg-1),var(--bg-2));
color:#dfffe6;overflow:hidden;}
.stage{display:flex;align-items:center;justify-content:center;height:100vh;}
.glass-card{
  width:var(--card-w);max-width:92vw;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:18px;padding:24px;
  box-shadow:0 10px 40px rgba(0,0,0,0.7),0 0 40px rgba(56,189,248,0.05) inset;
  backdrop-filter: blur(10px) saturate(140%);
  border:1px solid var(--glass-border);
  text-align:center;
}
.card-header h1{font-family:"JetBrains Mono", monospace;font-size:20px;margin:0;color:var(--neon);text-transform:uppercase;text-shadow:0 0 18px rgba(56,189,248,0.22);}
input{width:100%;padding:12px;margin:10px 0;border-radius:6px;border:1px solid rgba(56,189,248,0.06);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.006));color:#eafff2;outline:none;}
input::placeholder{color:rgba(200,255,255,0.22);}
button{width:100%;padding:12px;border-radius:6px;border:none;background:var(--neon);color:#020617;font-weight:bold;cursor:pointer;margin-bottom:12px;}
button:hover{opacity:.9;}
.small{font-size:12px;color:var(--muted);}
.result{margin-top:12px;font-weight:bold;word-break:break-word;}
</style>
</head>

<body>
<main class="stage">
<section class="glass-card">
<header class="card-header">
<h1>ROK XD • Register</h1>
<div class="small">Créez votre compte sécurisé</div>
</header>

<form id="registerForm">
  <input name="username" placeholder="Nom d'utilisateur" required>
  <input type="email" name="email" placeholder="Email" required>
  <input type="password" name="password" placeholder="Mot de passe" required>

  <div class="g-recaptcha" data-sitekey="6Lf3pzosAAAAAIa_kseDG21v0LUio1c_1bdalSRr"></div>

  <button>S'inscrire</button>
</form>

<!-- Google Ads -->
<ins class="adsbygoogle"
     style="display:block;margin-top:15px"
     data-ad-client="ca-pub-XXXX"
     data-ad-slot="XXXX"
     data-ad-format="auto"></ins>

<p class="result" id="msg"></p>
<p class="small"><a href="/">Déjà inscrit ? Connexion</a></p>
</section>
</main>

<script>
document.getElementById('registerForm').addEventListener('submit', async e=>{
  e.preventDefault();
  const recaptcha = grecaptcha.getResponse();
  if(!recaptcha){alert("Veuillez valider le CAPTCHA");return;}
  const data={
    username:e.target.username.value,
    email:e.target.email.value,
    password:e.target.password.value,
    recaptcha
  };
  const res=await fetch('/auth/register',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify(data)
  });
  const r=await res.json();
  document.getElementById('msg').innerText=r.message;
  if(r.message.includes("succès")) setTimeout(()=>location.href='/',1200);
});
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</body>
</html>
